square: false
type: grid
columns: 2
cards:
  - show_state: false
    show_name: false
    camera_view: auto
    fit_mode: fill
    type: picture-entity
    entity: camera.local_file
    tap_action:
      action: call-service
      service: automation.trigger
      data:
        entity_id: automation.whats_in_fridge
    card_mod: null
  - type: custom:html-template-card
    title: null
    content: >
      {% set csv = states('input_text.fridge_contents') | default('') %} {% set
      items = csv.split(',') | map('trim') | reject('equalto','') | list %} <div
      style="color: var(--primary-text-color); line-height:0.4;
      font-size:1.128rem;">
       <ul style="margin:0; padding:1; list-style-position: inside;">
         {% for it in items %}
           <li style="margin:0; padding:0;">{{ it }}</li>
         {% endfor %}
    entities:
      - input_text.fridge_contents
  - type: horizontal-stack
    view_layout:
      column: 1
      row: 2
      column_span: 2
    cards:
      - type: button
        name: Refresh
        icon: mdi:refresh
        tap_action:
          action: call-service
          service: automation.trigger
          data:
            entity_id: automation.whats_in_fridge
      - type: markdown
        content: >-
          {% set t = state_attr('automation.whats_in_fridge','last_triggered')
          %} **Last updated:** {{ t | as_local | relative_time if t else 'never'
          }}